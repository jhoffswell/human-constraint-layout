%!TEX root = constraint-layout.tex
\section{Examples Reproduced in \projectname}
\label{sec:examples}

To demonstrate the conciseness and expressiveness of \projectname for domain-specific
graph layout, we reproduce several real-world examples from social 
networks~\cite{rothenberg1998using}, biological systems~\cite{barsky2008cerebral}, 
and ecological networks~\cite{kruger2017,baskerville2011spatial}. 
We compare our recreated visualizations to the original layouts and 
discuss the benefits of our technique for creating highly customized graph layouts.
For each recreated example, the layout of the nodes is produced
entirely in \projectname. However, we added additional labeling to the 
final figures to better match the originals.

We include the specification for each of our three major examples 
(Figure~\ref{fig:syphilis-spec}, \ref{fig:tlr4-spec}, \ref{fig:serengeti-spec}),
and annotate the specification with the number of sets produced for each 
constraint definition (green), the number of WebCoLa constraints generated
for each SetCoLa constraint (blue), and the behavior of SetCoLa constraints
that are not directly translated to WebCoLa constraints (purple).

% comparison of user spec and generated spec (quantiative comparison)
% point out measure of comprehension
% our demo uses domain props whereas low-level constraints in _id (separate from original intent)

\subsection{Syphilis Social Network}
\syphilisLayout
\syphilisSpec

Social networks can be a powerful way to understand inter-personal
relationships and are useful for tracking the spread of diseases that
result from personal contact \cite{rothenberg1998using,fitzpatrick2001preventable,mcelroy2003network,fu2011hiv}.
The ability to track and identify individuals at risk can help
lead to treatment and manage the spread of the disease. In
addition to the links between individuals, structuring the layout by
properties such as social group may reveal additional details about
how the disease is spread amongst individuals.

Rothenberg et al.\ discuss an ethnographic approach for identifying the
``core'' groups in a social network to better understand the transmission
of syphilis amongst sexual partners~\cite{rothenberg1998using}. They found
that there were three primary groups involved in the sexual network under study:
affluent white men, younger white women, and African-American men, 
which are visualized from left to right in Figure~\ref{fig:syphilis-layout}a. 
The authors note that a number of outsiders to these ``core'' groups
(visualized as the top cluster of Figure~\ref{fig:syphilis-layout}a) 
also played a significant role in the network. In
particular, \emph{``Visualization of these groups and all their sex
  partners uncovered the importance of several people not specifically
  identified with these groups.''}

We reproduced this visualization with \projectname~(Figure~\ref{fig:syphilis-layout}b) 
and included a number of additional constraints on the layout apart
from the separation constraints that are visible in the original image. In
particular, we included a circle constraint on the group of young white
women to more strongly enforce the result shown in the original figure and
applied an alignment constraint on the two groups of young
men, as well as some additional padding. The \projectname specification
is shown in Figure~\ref{fig:syphilis-spec}.

The simplest recreation of this figure can be done with three constraint
definitions and three \projectname constraints, which generate a total of
$123$ WebCoLa constraints~(Figure~\ref{fig:constraints}).
Our modified layout~(Figure~\ref{fig:syphilis-layout}b) includes 
five constraint definitions, nine \projectname constraints, and generates 
$166$ WebCoLa constraints~(Figure~\ref{fig:constraints}). With a small 
number of user-defined constraints, we can update the layout to produce
one that more effectively communicates the ethnographic groupings. The
alignment and circle constraints emphasize the group relationships by
introducing shared visual properties amongst the nodes. The more grid-like
layout also faciliates scanning of the nodes. The
WebCoLa constraint solver includes a procedure to reduce the length of
edges to a user-defined length. This behavior encourages the circle of young women
to shift towards the group of African-American men further demonstrating
the \emph{``intensity of interaction''} between the two groups, as described in
the original paper.

\subsection{TLR4 Network}
\tlrfourSpec

Biological networks are a common domain requiring customized visualizations
to capture the cellular structure of the nodes in addition to the links
contained in the network. Cerebral \cite{barsky2008cerebral} is a visualization
tool designed to show variations in biological networks across experimental
conditions. While many layouts may be produced by hand, Barsky et al.\ show that 
Cerebral can automatically and efficiently arrange the nodes by the location
of the biomolecule within a cell. The immune response outcomes are positioned
at the very bottom of the figure and grouped by biological function. The result
of Cerebral's layout on the TLR4 network is shown in Figure~\ref{fig:tlr4-layout}a.
Our reproduction in \projectname is shown in Figure~\ref{fig:tlr4-layout}b,
with the specification shown in Figure \ref{fig:tlr4-spec}.

Our recreated layout includes five constraint definitions with eight \projectname
constraints, which generates $363$ constraints in WebCoLa (Figure~\ref{fig:constraints}).
Similar to Cerebral, this \projectname specification could easily be reused 
across different graphs in the domain since the specification itself does
not refer to the individual nodes but to the high-level properties desired
by the layout.

\subsection{Serengeti Food Web}
\krugerLayout
\serengetiLayout
\serengetiSpec

Food webs visualize complex producer-consumer relationships in ecological
systems. Despite the challenges in creating an informative
visualization \cite{kearney2016blog}, food webs are a common presentation strategy for this information
\cite{hinke2004visualizing,harper2006dynamic,lavigne1996cod,baskerville2011spatial,yodzis1998local,cohen2003ecological,benson2016higher,kruger2017}. Small or simplified food webs may be
drawn by hand, but many real world ecosystems can have hunderds of
interconnected organisms. In such cases, a customized layout may be useful
for reasoning about the structure of the ecological system.

Small food webs exhibit several of the properties of larger food webs, such
as a node hierarchy arranged by the trophic level.
For example, Figure~\ref{fig:kruger-layout}a visualizes a subset of the
species found in Kruger National Park~\cite{kruger2017}. We can easily 
recreate the layout~(Figure~\ref{fig:kruger-layout}b) with a small 
number of constraints on the nodes; for this specification, we specify 
two constraint definitions with three constraints~(Figure~\ref{fig:constraints}).
In particular, we constrain each trophic level to be aligned and enforce an
ordering of the layers that respects the food web hierarchy. We also
include a constraint to order each layer by a predefined \texttt{order} property
on the nodes to exactly match the original visualization. This \projectname specification 
could easily be applied to other small food webs to produce a similar layout.
However, as the food web gets more complex with more nodes associated with
each trophic level, it may become necessary to relax the alignment
constraints or introduce additional clustering to highlight other
structures within the layout.

One example of a larger ecological network is the Serengeti food web from
Baskerville et al.~\cite{baskerville2011spatial}, which depicts the
relationships among $161$ plants, herbivores, and carnivores with $592$ links
between entities. Baskerville et al.\ employ a Bayesian analysis method to
produce related clusters in each trophic level for the Serengeti food web.
Baskerville et al.\ then visualize the results with a
customized layout showing both the trophic hierarchy and
the group clustering~(Figure \ref{fig:serengeti-layout}a). The Bayesian
analysis approach and customized visualization highlight relationships between
the plant habitats and underlying network structure that may be hard to identify
from the data alone. In particular, \todo{pull in example conclusion from
Baskerville paper to discuss figure}.

We reproduce this layout in \projectname~(Figure~\ref{fig:serengeti-layout}b).
For this specification~(Figure \ref{fig:serengeti-spec}), we author six constraint 
definitions that create sets for each group in the layout and sets 
representing each tropic level. For the carnivores and herbivores,
we constrain the position of the nodes within the visualization region,
introduce alignments on the nodes, and manage the order with which they
are displayed. For the plant sets, we apply cluster constraints
to enforce a tighter grouping of the nodes. For this specification,
we define a total of $18$ \projectname constraints, which generate $939$
WebCoLa constraints~(Figure~\ref{fig:constraints}).
The original visualization was published in \textsc{Plos} Computational
Biology \cite{baskerville2011spatial}, and an interactive version of the
figure was created with D3 \cite{baskerville2011interactive}. The
interactive version of the figure lacks the labeling and alignment of the
published figure, but allows the viewer to more easily trace the links
between different nodes in the network. With \projectname, the layout
structure is specified by the constraints, which could support similar
interactive behaviors while maintaining the structural features of the
published figure.

Baskerville et al.\ note that \emph{``We have not included invertebrates
  (insects and parasitic helminths) or birds''} in their published food
web, though \emph{``hypothesize that the general conclusions will be
  largely robust to the addition of more species.''} One advantage of
\projectname~is that the layout is independant of the individual nodes, so
the authors could reuse the layout specification to visualize future iterations
of the Serengeti food web or explore similar structures across different
ecological communities.
