%!TEX root = constraint-layout.tex
\section{Introduction}
With an appropriate graph layout, node-link diagrams can
can effectively convey properties of an underlying
network structure, such as hierarchy or connectedness. Such visualizations are common across domains including ecological networks
\cite{hinke2004visualizing,harper2006dynamic,lavigne1996cod,baskerville2011spatial,yodzis1998local,cohen2003ecological,kearney2016blog,benson2016higher,kruger2017},
biological systems
\cite{barsky2008cerebral,shannon2003cytoscape,gehlenborg2010visualization,saraiya2005visualizing,becker2001graph},
and social networks
\cite{scott1988social,rothenberg1998using,fitzpatrick2001preventable,mcelroy2003network,fu2011hiv}, 
among many others. A graph layout may utilize
domain-specific details in order to emphasize relevant patterns in the
data. 
%In an ecological network for example, nodes could be split by trophic
%level (e.g., its positition in the food chain) to highlight the hierarchy
%of producer/consumer relationships
%(Figure~\ref{fig:kruger-layout}). This visualization shows a customized
%layout: a unique layout that leverages knowledge of the data domain for
%node placement and understanding of the graph structure.
In a biological pathway for example, nodes could be layered by their 
subcellular location to provide an overview of the cellular structure
(Figure~\ref{fig:tlr4-layout}). The additional ``downstream genes'' layer
can further show the outcomes of this network clustered by molecular function.

\tlrfourLayout

Many domain-specific layout techniques address particular needs
for customized layouts~\cite{barsky2008cerebral,genc2003constrained,shannon2003cytoscape,kearney2017d3,kearney2017ecopath}. These
techniques leverage common structural details that are significant to the
domain, such as known data hierarchies including cellular 
structure (Figure~\ref{fig:tlr4-layout}) or trophic level
(Figure~\ref{fig:kruger-layout},~\ref{fig:serengeti-layout}), as a guiding property of the
layout. However, these techniques rarely generalize beyond the domain for
which they were designed. There thus exists a mismatch between domains
where customized layouts would be useful and the availability of tools to
support those domains. When a layout technique does not exist for the
domain of interest, users are required to either fit their data
to available techniques or devise a new algorithm. Creating a
customized layout algorithm can be challenging and often requires both
domain and programming expertise.
This barrier introduces a gap between the 
analysis needs of some domains and the availability of techniques to
handle those needs.

Constraints are a natural way to identify the desired properties for a
customized layout, as the designer can think about how domain-specific
properties drive the positions of nodes. However, many existing techniques
for constraint layout require the user to identify individual constraints
on nodes or node \emph{pairs} in the graph. This process can be highly labor
intensive, requiring thousands of similar constraints or careful reasoning
about which nodes should be constrained. Furthermore, these constraints often
refer to low-level node properties (such as the node index) and thus prevent
the user from reusing the layout across graphs in the same domain.

To enable the design of customized domain-specific layouts with minimal
programming effort, we present \projectname: a domain specific language for
specifying high-level constraints for graph layout. Users partition nodes
into sets based on node or graph properties and apply layout constraints
within or between these sets. This approach allows users to specify layout
requirements at a high-level, deferring the generation of
node-level constraints to the underlying runtime system. These constraint
specifications reduce programming effort while still enabling highly
customized and generalizable graph layouts.

We implemented \projectname in 
WebCoLa~\cite{WebCoLa}, a JavaScript library for constraint based graph
layout, by compiling the \projectname constraints into inter-node WebCoLa constraints.
To demonstrate the generalizability of our language, we
recreate a number of customized layouts found in the scientific research 
literature. We
show that users can compactly specify complex graph layouts that resemble
those produced by customized layout engines and can reapply layout
specifications across different graphs.
