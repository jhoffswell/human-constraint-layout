%!TEX root = constraint-layout.tex
\section{Introduction}
With an appropriate graph layout, node-link diagrams can
effectively convey properties of an underlying
network structure, such as hierarchy or connectedness. Such visualizations
are common across a variety of domains, including ecological networks
\cite{hinke2004visualizing,harper2006dynamic,lavigne1996cod,baskerville2011spatial,yodzis1998local,cohen2003ecological,kearney2016blog,benson2016higher,kruger2017},
biological systems
\cite{barsky2008cerebral,shannon2003cytoscape,gehlenborg2010visualization,saraiya2005visualizing,becker2001graph,kojima2007efficient,li2005grid},
and social networks
\cite{scott1988social,rothenberg1998using,fitzpatrick2001preventable,mcelroy2003network,fu2011hiv}, 
among many others. A graph layout may utilize
domain-specific properties in order to emphasize relevant patterns in the
data. 
%In an ecological network for example, nodes could be split by trophic
%level (e.g., its positition in the food chain) to highlight the hierarchy
%of producer/consumer relationships
%(Figure~\ref{fig:kruger-layout}). This visualization shows a customized
%layout: a unique layout that leverages knowledge of the data domain for
%node placement and understanding of the graph structure.
In a biological pathway, nodes can be layered by their
subcellular location to provide an overview of the cellular structure
(Figure~\ref{fig:tlr4-layout}). The additional ``downstream genes'' layer
can further show the outcomes of this network, clustered by molecular function.

\tlrfourLayout

Many domain-specific layout techniques address particular needs
for customized layouts~\cite{barsky2008cerebral,genc2003constrained,shannon2003cytoscape,kearney2017d3,kearney2017ecopath}. These
techniques leverage common structural properties that are significant to the
domain, such as known data hierarchies including cellular 
structure (Figure~\ref{fig:tlr4-layout}) or trophic level
(Figure~\ref{fig:kruger-layout},~\ref{fig:serengeti-layout}), as a guiding property of the
layout. However, these techniques rarely generalize beyond the domain for
which they were designed, and there are numerous
other domains for which customized layouts would be useful
but for which tools that provide them are unavailable.
Thus, when a layout technique does not exist for the
domain of interest, users must either fit their data
to available techniques or design and implement a new algorithm.
Creating a customized layout algorithm requires both
domain and programming expertise, and so introduces a gap between 
analysis needs and the techniques available to handle those needs.

\todo{AB: claimed ``numerous'' other domains.  OK, or overclaiming?}

Constraints can be used to specify desired properties for a layout by
allowing the designer to control the positions of nodes using
domain-specific information.  However, many existing techniques
for constraint layout require the user to define constraints
on individual nodes or node pairs in the graph. This process can be labor
intensive, requiring thousands of similar constraints and careful reasoning
about which nodes should be constrained. Moreover, instance-level constraints 
(e.g., defined \emph{extensionally} via node indices) prevent
reuse of a layout for various graphs from the same domain.

To enable customized domain-specific layouts with reduced
programming effort, we contribute \projectname: a domain-specific language for
specifying high-level constraints for graph layout. Users partition nodes
into sets based on node or graph properties, and apply layout constraints
to these sets. This approach allows users to specify layout
requirements at a high level, deferring the generation of
instance-level constraints to the underlying runtime system. These constraint
definitions reduce specification effort while enabling highly
customized and reusbale graph layouts.

Our implementation of \projectname generates instance-level constraints for
WebCoLa~\cite{WebCoLa}, a JavaScript library for constraint-based graph
layout. To demonstrate the expressiveness of our language, we
recreate several customized layouts found in the scientific research 
literature. We
show that users can compactly specify complex graph layouts that resemble
those produced by customized layout engines, and can reapply these
specifications across different graphs. Our \projectname specifications
can reduce the number of constraints written by the user by up to a 
factor of 90.
